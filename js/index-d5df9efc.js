var B=Object.defineProperty;var E=(o,t,n)=>t in o?B(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n;var u=(o,t,n)=>(E(o,typeof t!="symbol"?t+"":t,n),n);import{d as P,e as m,f as z,w as M,g as q,o as F,c as L,b as c,q as b,v as R,u as x,s as I,p as N,m as U,_ as A}from"./index-7d12d925.js";const X=o=>(N("data-v-543b4041"),o=o(),U(),o),D={sm:"px-18 py-12",class:"relative z-20 flex flex-col items-center box1 p-4 gap-y-4"},H=X(()=>c("span",null,"点击粒子个数",-1)),T=["max"],W=X(()=>c("span",null,"画布最多粒子个数(最大1000)",-1)),j=["min"],G=P({__name:"index",setup(o){const t=m(),n=z(()=>t.value.getContext("2d")),f=m([]),d=m(10),i=m(200);M(()=>d.value,e=>{e>=i.value&&(d.value=Math.floor(i.value))}),M(()=>i.value,e=>{Math.floor(e)>1e3&&(i.value=1e3)});class Y{constructor({x:s,y:a,radius:l,color:v,speedX:p,speedY:r}){u(this,"x");u(this,"y");u(this,"radius");u(this,"color");u(this,"speedX");u(this,"speedY");u(this,"canvasRef");this.x=s,this.y=a,this.radius=l,this.color=v,this.speedX=p,this.speedY=r}draw(){n.value.beginPath(),n.value.arc(this.x,this.y,this.radius,0,Math.PI*2),n.value.closePath(),n.value.fillStyle=this.color,n.value.fill()}update(){this.x+=this.speedX,this.y+=this.speedY,(this.x-this.radius<0||this.x+this.radius>=t.value.width)&&Math.random()>.1&&(this.speedX*=-1),(this.y-this.radius<0||this.y+this.radius>=t.value.height)&&Math.random()>.1&&(this.speedY*=-1)}}function _(){const e=t.value;e.width=window.innerWidth-100,e.height=window.innerHeight-140}function C(){return"#"+Math.random().toString(16).slice(2,8)}function h(e,s){return Math.floor(Math.random()*(s-e+1)+e)}function k(){for(let e=0;e<10;e++){const s=h(1,5),a=h(s,t.value.width-s),l=h(s,t.value.height-s);y(a,l)}}function w(){requestAnimationFrame(w),n.value.clearRect(0,0,t.value.width,t.value.height),f.value.forEach(e=>{e.draw(),e.update()}),V(Math.floor(i.value)>=1e3?1e3:Math.floor(i.value))}function y(e,s,a=2){const l=h(1,h(3,7)),v=C(),p=(Math.random()-.5)*a,r=(Math.random()-.5)*a;f.value.push(new Y({x:e,y:s,radius:l,color:v,speedX:p,speedY:r}))}function S(e){const s=e.clientX,a=e.clientY,l=t.value.getBoundingClientRect(),v=s-l.left,p=a-l.top,r=4;for(let g=0;g<d.value;g++)y(v,p,r*r)}function V(e){const s=f.value.filter(a=>a.x>0&&a.x<t.value.width&&a.y>0&&a.y<t.value.height);s.length>e&&f.value.splice(e,s.length-e)}return q(()=>{var e;window.addEventListener("resize",_),(e=t.value)==null||e.addEventListener("click",S),_(),k(),w()}),(e,s)=>(F(),L("div",D,[c("div",null,[H,b(c("input",{class:"px-4 py-3 rounded-md w-80 text-base",type:"number","onUpdate:modelValue":s[0]||(s[0]=a=>I(d)?d.value=a:null),max:x(i),placeholder:"点击粒子个数"},null,8,T),[[R,x(d)]])]),c("div",null,[W,b(c("input",{class:"px-4 py-3 rounded-md w-80 text-base",type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>I(i)?i.value=a:null),min:x(d)*2,placeholder:"画布最多粒子个数"},null,8,j),[[R,x(i)]])]),c("canvas",{ref_key:"canvasRef",ref:t,width:"700",class:"box rounded-md"},null,512)]))}});const O=A(G,[["__scopeId","data-v-543b4041"]]);export{O as default};
